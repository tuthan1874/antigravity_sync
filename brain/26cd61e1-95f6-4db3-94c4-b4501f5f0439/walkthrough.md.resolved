# Walkthrough: Apify LinkedIn Search Workflow

## ğŸ“ Tá»•ng quan

ÄÃ£ hoÃ n thÃ nh xÃ¢y dá»±ng quy trÃ¬nh tá»± Ä‘á»™ng hÃ³a n8n Ä‘á»ƒ káº¿t ná»‘i vá»›i Apify API, sá»­ dá»¥ng Actor `google-search-scraper` Ä‘á»ƒ cÃ o dá»¯ liá»‡u LinkedIn profiles.

## ğŸ“¦ Files Ä‘Ã£ táº¡o

### Workflow Files

#### 1. [apify-linkedin-search-simple.json](file:///e:/TDC_App/n8n-skills/apify-linkedin-search-simple.json) â­

**Workflow Ä‘Æ¡n giáº£n - Khuyáº¿n nghá»‹ sá»­ dá»¥ng**

- **6 nodes**: Form Trigger â†’ Prepare Input â†’ Run Actor (Sync) â†’ Format Results â†’ Aggregate â†’ Final Output
- **Synchronous execution**: Chá» káº¿t quáº£ ngay láº­p tá»©c (timeout 120s)
- **Dá»… setup**: Chá»‰ cáº§n cáº¥u hÃ¬nh API token á»Ÿ 1 node
- **PhÃ¹ há»£p**: Háº§u háº¿t use cases vá»›i <50 results

**Kiáº¿n trÃºc:**
```
Form Trigger
    â†“
Prepare Apify Input (Code)
    â†“
Run Apify Actor (Sync) â† HTTP POST vá»›i timeout 120s
    â†“
Format LinkedIn Results (Code)
    â†“
Aggregate Results
    â†“
Create Final Output (Code)
```

#### 2. [apify-linkedin-search-workflow.json](file:///e:/TDC_App/n8n-skills/apify-linkedin-search-workflow.json)

**Workflow Ä‘áº§y Ä‘á»§ vá»›i polling mechanism**

- **12 nodes**: Bao gá»“m async execution, polling, vÃ  retry logic
- **Asynchronous execution**: KhÃ´ng giá»›i háº¡n timeout
- **Advanced error handling**: Retry khi Actor chÆ°a hoÃ n thÃ nh
- **PhÃ¹ há»£p**: Scraping lá»›n (>50 results) hoáº·c cáº§n control chi tiáº¿t

**Kiáº¿n trÃºc:**
```
Form Trigger
    â†“
Prepare Apify Input (Code)
    â†“
Run Apify Actor â† HTTP POST async
    â†“
Extract Run ID (Code)
    â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â†“                 â†‘
Wait 5 Seconds       â”‚
    â†“                 â”‚
Check Actor Status   â”‚
    â†“                 â”‚
Is Completed? â”€â”€â”€Noâ”€â”€â”˜
    â†“ Yes
Get Actor Results
    â†“
Format LinkedIn Results (Code)
    â†“
Aggregate Results
    â†“
Create Final Output (Code)
```

---

### Documentation

#### 3. [docs/apify-linkedin-workflow-guide.md](file:///e:/TDC_App/n8n-skills/docs/apify-linkedin-workflow-guide.md)

HÆ°á»›ng dáº«n chi tiáº¿t bao gá»“m:

- âœ… **Setup Instructions**: CÃ¡ch láº¥y Apify API token, import workflow, cáº¥u hÃ¬nh
- âœ… **Usage Guide**: CÃ¡ch sá»­ dá»¥ng form trigger vÃ  test workflow
- âœ… **Output Format**: Cáº¥u trÃºc JSON káº¿t quáº£ tráº£ vá»
- âœ… **Comparison Table**: So sÃ¡nh 2 phiÃªn báº£n workflow
- âœ… **Pricing Info**: Chi phÃ­ Apify vÃ  free tier limits
- âœ… **Troubleshooting**: Giáº£i quyáº¿t cÃ¡c lá»—i thÆ°á»ng gáº·p
- âœ… **Advanced Customization**: CÃ¡ch tÃ¹y chá»‰nh search query vÃ  filters
- âœ… **Use Cases**: VÃ­ dá»¥ thá»±c táº¿ (recruitment, sales, research)

#### 4. [README.md](file:///e:/TDC_App/n8n-skills/README.md)

README cáº­p nháº­t vá»›i:
- Quick start guide
- Overview cá»§a 3 workflows (2 Apify + 1 Google Custom Search)
- Links Ä‘áº¿n documentation chi tiáº¿t
- Cost breakdown
- Sample output

---

## ğŸ¯ TÃ­nh nÄƒng chÃ­nh

### Input Parameters

Cáº£ 2 workflows Ä‘á»u nháº­n 3 parameters qua Form Trigger:

1. **Job Title** (required): Chá»©c danh cáº§n tÃ¬m
   - VÃ­ dá»¥: "Software Engineer", "Product Manager", "CEO"

2. **Location** (required): Äá»‹a Ä‘iá»ƒm
   - VÃ­ dá»¥: "Vietnam", "Ho Chi Minh City", "Hanoi"

3. **Max Results** (optional): Sá»‘ lÆ°á»£ng káº¿t quáº£ tá»‘i Ä‘a
   - Máº·c Ä‘á»‹nh: 10
   - CÃ³ thá»ƒ tÃ¹y chá»‰nh: 5, 20, 50, 100

### Search Query Generation

Workflow tá»± Ä‘á»™ng táº¡o search query tá»‘i Æ°u cho LinkedIn:

```javascript
const searchQuery = `site:linkedin.com/in/ "${jobTitle}" "${location}"`;
```

VÃ­ dá»¥ output:
```
site:linkedin.com/in/ "Software Engineer" "Vietnam"
```

### Apify Actor Configuration

Sá»­ dá»¥ng Actor `apify/google-search-scraper` vá»›i config:

```json
{
  "queries": "site:linkedin.com/in/ \"Software Engineer\" \"Vietnam\"",
  "maxPagesPerQuery": 1,
  "resultsPerPage": 10,
  "mobileResults": false,
  "languageCode": "",
  "countryCode": ""
}
```

### Result Filtering

Code node tá»± Ä‘á»™ng filter chá»‰ láº¥y LinkedIn profile URLs:

```javascript
if (result.url && result.url.includes('linkedin.com/in/')) {
  // Chá»‰ láº¥y profiles, bá» qua company pages vÃ  posts
}
```

### Output Format

JSON structure vá»›i metadata Ä‘áº§y Ä‘á»§:

```json
{
  "metadata": {
    "searchQuery": "site:linkedin.com/in/ \"Software Engineer\" \"Vietnam\"",
    "jobTitle": "Software Engineer",
    "location": "Vietnam",
    "maxResults": 10,
    "timestamp": "2026-01-03T15:57:36.000Z"
  },
  "totalResults": 8,
  "results": [
    {
      "title": "Profile title",
      "url": "https://www.linkedin.com/in/username",
      "description": "Profile snippet",
      "displayedUrl": "Display URL",
      "emphasizedKeywords": ["keyword1", "keyword2"],
      "sitelinks": []
    }
  ]
}
```

---

## ğŸ”§ Setup Requirements

### 1. Apify Account

- âœ… Free tier: $5 credit/thÃ¡ng
- âœ… ÄÄƒng kÃ½ táº¡i: https://apify.com
- âœ… Láº¥y API token tá»« Settings â†’ Integrations

### 2. n8n Instance

- âœ… n8n cloud hoáº·c self-hosted
- âœ… Version >= 1.0

### 3. Configuration Steps

**Simple Version** (1 node cáº§n config):
1. Node "Run Apify Actor (Sync)"
2. Header "Authorization": `Bearer YOUR_TOKEN`

**Full Version** (3 nodes cáº§n config):
1. Node "Run Apify Actor"
2. Node "Check Actor Status"  
3. Node "Get Actor Results"

---

## ğŸ’¡ Æ¯u Ä‘iá»ƒm so vá»›i Google Custom Search API

| Feature | Apify | Google Custom Search |
|---------|-------|---------------------|
| **Quota** | $5 credit (~2000 searches) | 100 queries/day |
| **Results per query** | Unlimited | Max 10 |
| **Data richness** | Full search result data | Basic data |
| **Rate limiting** | Flexible | Strict |
| **Cost** | Pay as you go | Free tier limited |
| **Reliability** | High | Medium |

---

## ğŸ“Š Testing Checklist

> [!IMPORTANT]
> Workflow cáº§n Ä‘Æ°á»£c test vá»›i Apify API token thá»±c táº¿

### Manual Testing Steps

- [ ] Import workflow vÃ o n8n
- [ ] Cáº¥u hÃ¬nh Apify API token
- [ ] Activate workflow
- [ ] Test vá»›i sample input:
  - Job Title: "Software Engineer"
  - Location: "Vietnam"
  - Max Results: 10
- [ ] Verify output format
- [ ] Check Apify credit usage

### Expected Results

- âœ… Workflow executes successfully
- âœ… Returns 5-10 LinkedIn profile URLs
- âœ… Each result has title, url, description
- âœ… Metadata includes search parameters
- âœ… Total execution time < 30 seconds (Simple version)

---

## ğŸš€ Next Steps

### For Users

1. **Láº¥y Apify API Token**
   - ÄÄƒng kÃ½ account táº¡i apify.com
   - Copy token tá»« Settings

2. **Import vÃ  Configure**
   - Import [apify-linkedin-search-simple.json](file:///e:/TDC_App/n8n-skills/apify-linkedin-search-simple.json) vÃ o n8n
   - Thay API token trong node "Run Apify Actor (Sync)"

3. **Test Workflow**
   - Activate workflow
   - Má»Ÿ form URL
   - Submit vá»›i test data

4. **Monitor Usage**
   - Check Apify dashboard Ä‘á»ƒ xem credit usage
   - Adjust max results náº¿u cáº§n

### Potential Enhancements

- [ ] Add webhook output Ä‘á»ƒ gá»­i results Ä‘áº¿n external service
- [ ] Integrate vá»›i Google Sheets Ä‘á»ƒ lÆ°u results
- [ ] Add email notification khi cÃ³ results má»›i
- [ ] Create scheduled trigger Ä‘á»ƒ tá»± Ä‘á»™ng search Ä‘á»‹nh ká»³
- [ ] Add data enrichment (láº¥y thÃªm thÃ´ng tin tá»« LinkedIn)

---

## ğŸ“š Resources

- **Apify Docs**: https://docs.apify.com/
- **n8n Docs**: https://docs.n8n.io/
- **google-search-scraper**: https://apify.com/apify/google-search-scraper
- **Detailed Guide**: [docs/apify-linkedin-workflow-guide.md](file:///e:/TDC_App/n8n-skills/docs/apify-linkedin-workflow-guide.md)

---

## âœ… Validation

### Files Created

- âœ… [apify-linkedin-search-simple.json](file:///e:/TDC_App/n8n-skills/apify-linkedin-search-simple.json) - 6 nodes, synchronous
- âœ… [apify-linkedin-search-workflow.json](file:///e:/TDC_App/n8n-skills/apify-linkedin-search-workflow.json) - 12 nodes, async with polling
- âœ… [docs/apify-linkedin-workflow-guide.md](file:///e:/TDC_App/n8n-skills/docs/apify-linkedin-workflow-guide.md) - Comprehensive guide
- âœ… [README.md](file:///e:/TDC_App/n8n-skills/README.md) - Updated with Apify workflows

### Code Quality

- âœ… Proper error handling in Code nodes
- âœ… LinkedIn URL filtering
- âœ… Metadata tracking
- âœ… Clean JSON output structure
- âœ… Configurable parameters

### Documentation Quality

- âœ… Vietnamese language for Vietnamese users
- âœ… Step-by-step setup instructions
- âœ… Troubleshooting section
- âœ… Cost breakdown
- âœ… Use case examples
- âœ… Comparison tables

---

## ğŸ‰ Summary

ÄÃ£ hoÃ n thÃ nh xÃ¢y dá»±ng 2 n8n workflows Ä‘á»ƒ tá»± Ä‘á»™ng tÃ¬m kiáº¿m LinkedIn profiles thÃ´ng qua Apify API:

1. **Simple Version**: Dá»… setup, phÃ¹ há»£p cho háº§u háº¿t use cases
2. **Full Version**: Advanced vá»›i polling vÃ  retry logic

Cáº£ 2 workflows Ä‘á»u:
- âœ… Sá»­ dá»¥ng Apify Actor `google-search-scraper`
- âœ… CÃ³ Form Trigger Ä‘á»ƒ nháº­p Job Title vÃ  Location
- âœ… Tá»± Ä‘á»™ng filter chá»‰ láº¥y LinkedIn profile URLs
- âœ… Tráº£ vá» JSON vá»›i metadata Ä‘áº§y Ä‘á»§
- âœ… CÃ³ documentation chi tiáº¿t báº±ng tiáº¿ng Viá»‡t

**Khuyáº¿n nghá»‹**: Báº¯t Ä‘áº§u vá»›i Simple Version Ä‘á»ƒ test, sau Ä‘Ã³ chuyá»ƒn sang Full Version náº¿u cáº§n scrape sá»‘ lÆ°á»£ng lá»›n.
